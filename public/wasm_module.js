var createWasmModule=(()=>{var _scriptName=typeof document!="undefined"?document.currentScript?.src:undefined;return async function(moduleArg={}){var moduleRtn;var e=moduleArg,g="./this.program",q="",r;try{q=(new URL(".",_scriptName)).href}catch{}r=async a=>{a=await fetch(a,{credentials:"same-origin"});if(a.ok)return a.arrayBuffer();throw Error(a.status+" : "+a.url);};var aa=console.log.bind(console),t=console.error.bind(console),u,v=!1,w,ba,ca,x,y,z,da,ea,B,C,D,fa=!1;
function ha(){var a=x.buffer;y=new Int8Array(a);da=new Int16Array(a);e.HEAPU8=z=new Uint8Array(a);ea=new Uint16Array(a);e.HEAP32=B=new Int32Array(a);C=new Uint32Array(a);e.HEAPF32=D=new Float32Array(a);new Float64Array(a);new BigInt64Array(a);new BigUint64Array(a)}var E=0,F=null;function ia(a){e.onAbort?.(a);a="Aborted("+a+")";t(a);v=!0;a=new WebAssembly.RuntimeError(a+". Build with -sASSERTIONS for more info.");ca?.(a);throw a;}var G;
async function ja(a){if(!u)try{var b=await r(a);return new Uint8Array(b)}catch{}if(a==G&&u)a=new Uint8Array(u);else throw"both async and sync fetching of the wasm failed";return a}async function ka(a,b){try{var c=await ja(a);return await WebAssembly.instantiate(c,b)}catch(d){t(`failed to asynchronously prepare wasm: ${d}`),ia(d)}}
async function la(a){var b=G;if(!u)try{var c=fetch(b,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(c,a)}catch(d){t(`wasm streaming compile failed: ${d}`),t("falling back to ArrayBuffer instantiation")}return ka(b,a)}class ma{name="ExitStatus";constructor(a){this.message=`Program terminated with exit(${a})`;this.status=a}}
var na=a=>{for(;0<a.length;)a.shift()(e)},oa=[],pa=[],qa=()=>{var a=e.preRun.shift();pa.push(a)},H=!0,I=0,J={},ra=a=>{if(!(a instanceof ma||"unwind"==a))throw a;},sa=a=>{w=a;H||0<I||(e.onExit?.(a),v=!0);throw new ma(a);},ta=a=>{if(!v)try{if(a(),!(H||0<I))try{w=a=w,sa(a)}catch(b){ra(b)}}catch(b){ra(b)}},K=(a,b,c)=>{var d=z;if(!(0<c))return 0;var f=b;c=b+c-1;for(var h=0;h<a.length;++h){var k=a.codePointAt(h);if(127>=k){if(b>=c)break;d[b++]=k}else if(2047>=k){if(b+1>=c)break;d[b++]=192|k>>6;d[b++]=128|
k&63}else if(65535>=k){if(b+2>=c)break;d[b++]=224|k>>12;d[b++]=128|k>>6&63;d[b++]=128|k&63}else{if(b+3>=c)break;d[b++]=240|k>>18;d[b++]=128|k>>12&63;d[b++]=128|k>>6&63;d[b++]=128|k&63;h++}}d[b]=0;return b-f},L,ua=a=>{var b="EXT_color_buffer_float EXT_conservative_depth EXT_disjoint_timer_query_webgl2 EXT_texture_norm16 NV_shader_noperspective_interpolation WEBGL_clip_cull_distance EXT_clip_control EXT_color_buffer_half_float EXT_depth_clamp EXT_float_blend EXT_polygon_offset_clamp EXT_texture_compression_bptc EXT_texture_compression_rgtc EXT_texture_filter_anisotropic KHR_parallel_shader_compile OES_texture_float_linear WEBGL_blend_func_extended WEBGL_compressed_texture_astc WEBGL_compressed_texture_etc WEBGL_compressed_texture_etc1 WEBGL_compressed_texture_s3tc WEBGL_compressed_texture_s3tc_srgb WEBGL_debug_renderer_info WEBGL_debug_shaders WEBGL_lose_context WEBGL_multi_draw WEBGL_polygon_mode".split(" ");
return(a.getSupportedExtensions()||[]).filter(c=>b.includes(c))},va="undefined"!=typeof TextDecoder?new TextDecoder:void 0,M=(a,b=0,c)=>{var d=b;for(c=d+c;a[d]&&!(d>=c);)++d;if(16<d-b&&a.buffer&&va)return va.decode(a.subarray(b,d));for(c="";b<d;){var f=a[b++];if(f&128){var h=a[b++]&63;if(192==(f&224))c+=String.fromCharCode((f&31)<<6|h);else{var k=a[b++]&63;f=224==(f&240)?(f&15)<<12|h<<6|k:(f&7)<<18|h<<12|k<<6|a[b++]&63;65536>f?c+=String.fromCharCode(f):(f-=65536,c+=String.fromCharCode(55296|f>>10,
56320|f&1023))}}else c+=String.fromCharCode(f)}return c},wa=1,xa=[],N=[],ya=[],O=[],za=[],P=[],Q=a=>{for(var b=wa++,c=a.length;c<b;c++)a[c]=null;return b},S=(a,b,c,d)=>{for(var f=0;f<a;f++){var h=L[c](),k=h&&Q(d);h?(h.name=k,d[k]=h):R||=1282;B[b+4*f>>2]=k}},Ba=(a,b)=>{a.Ha||(a.Ha=a.getContext,a.getContext=function(d,f){f=a.Ha(d,f);return"webgl"==d==f instanceof WebGLRenderingContext?f:null});var c=a.getContext("webgl2",b);return c?Aa(c,b):0},Aa=(a,b)=>{var c=Q(P),d={handle:c,attributes:b,version:b.Ra,
Ia:a};a.canvas&&(a.canvas.Sa=d);P[c]=d;("undefined"==typeof b.Ka||b.Ka)&&Ca(d);return c},Ca=a=>{a||=T;if(!a.Qa){a.Qa=!0;var b=a.Ia;b.Za=b.getExtension("WEBGL_multi_draw");b.Wa=b.getExtension("EXT_polygon_offset_clamp");b.Va=b.getExtension("EXT_clip_control");b.cb=b.getExtension("WEBGL_polygon_mode");b.Ua=b.getExtension("WEBGL_draw_instanced_base_vertex_base_instance");b.Xa=b.getExtension("WEBGL_multi_draw_instanced_base_vertex_base_instance");2<=a.version&&(b.Ja=b.getExtension("EXT_disjoint_timer_query_webgl2"));
if(2>a.version||!b.Ja)b.Ja=b.getExtension("EXT_disjoint_timer_query");ua(b).forEach(c=>{c.includes("lose_context")||c.includes("debug")||b.getExtension(c)})}},R,T,Da=["default","low-power","high-performance"],Ea=[0,document,window],U={},Fa=()=>{if(!V){var a={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.language||"C").replace("-","_")+".UTF-8",_:g||"./this.program"},b;for(b in U)void 0===U[b]?delete a[b]:a[b]=U[b];var c=[];for(b in a)c.push(`${b}=${a[b]}`);
V=c}return V},V,Ga=a=>{for(var b=0,c=0;c<a.length;++c){var d=a.charCodeAt(c);127>=d?b++:2047>=d?b+=2:55296<=d&&57343>=d?(b+=4,++c):b+=3}return b},Ha=[null,[],[]],Ia=a=>"]"==a.slice(-1)&&a.lastIndexOf("["),Ja=a=>{a-=5120;return 0==a?y:1==a?z:2==a?da:4==a?B:6==a?D:5==a||28922==a||28520==a||30779==a||30782==a?C:ea},W=a=>{var b=L.Oa;if(b){var c=b.Ca[a];"number"==typeof c&&(b.Ca[a]=c=L.getUniformLocation(b,b.La[a]+(0<c?`[${c}]`:"")));return c}R||=1282},Ma=(a,b,c,d)=>{var f={string:l=>{var p=0;if(null!==
l&&void 0!==l&&0!==l){p=Ga(l)+1;var A=X(p);K(l,A,p);p=A}return p},array:l=>{var p=X(l.length);y.set(l,p);return p}};a=e["_"+a];var h=[],k=0;if(d)for(var n=0;n<d.length;n++){var m=f[c[n]];m?(0===k&&(k=Ka()),h[n]=m(d[n])):h[n]=d[n]}c=a(...h);return c=function(l){0!==k&&La(k);return"string"===b?l?M(z,l):"":"boolean"===b?!!l:l}(c)};e.noExitRuntime&&(H=e.noExitRuntime);e.print&&(aa=e.print);e.printErr&&(t=e.printErr);e.wasmBinary&&(u=e.wasmBinary);e.thisProgram&&(g=e.thisProgram);e.ccall=Ma;
e.cwrap=(a,b,c,d)=>{var f=!c||c.every(h=>"number"===h||"boolean"===h);return"string"!==b&&f&&!d?e["_"+a]:(...h)=>Ma(a,b,c,h,d)};var Na,La,X,Ka;e._g_navTriIndexPackedHeader=18512;
var Oa={x:()=>ia(""),t:()=>{H=!1;I=0},u:(a,b)=>{J[a]&&(clearTimeout(J[a].id),delete J[a]);if(!b)return 0;var c=setTimeout(()=>{delete J[a];ta(()=>Na(a,performance.now()))},b);J[a]={id:c,bb:b};return 0},B:a=>{var b=z.length;a>>>=0;if(2147483648<a)return!1;for(var c=1;4>=c;c*=2){var d=b*(1+.2/c);d=Math.min(d,a+100663296);a:{d=(Math.min(2147483648,65536*Math.ceil(Math.max(a,d)/65536))-x.buffer.byteLength+65535)/65536|0;try{x.grow(d);ha();var f=1;break a}catch(h){}f=void 0}if(f)return!0}return!1},X:(a,
b)=>{var c=b>>2;b={alpha:!!y[b+0],depth:!!y[b+1],stencil:!!y[b+2],antialias:!!y[b+3],premultipliedAlpha:!!y[b+4],preserveDrawingBuffer:!!y[b+5],powerPreference:Da[B[c+2]],failIfMajorPerformanceCaveat:!!y[b+12],Ra:B[c+4],Ya:B[c+5],Ka:y[b+24],Pa:y[b+25],$a:B[c+7],ab:y[b+32]};a=2<a?a?M(z,a):"":a;a=Ea[a]||document.querySelector(a);return!a||b.Pa?0:Ba(a,b)},k:a=>{T=P[a];e.ctx=L=T?.Ia;return!a||L?0:-5},v:(a,b)=>{var c=0,d=0,f;for(f of Fa()){var h=b+c;C[a+d>>2]=h;c+=K(f,h,Infinity)+1;d+=4}return 0},w:(a,
b)=>{var c=Fa();C[a>>2]=c.length;a=0;for(var d of c)a+=Ga(d)+1;C[b>>2]=a;return 0},y:()=>52,A:()=>52,z:function(){return 70},D:(a,b,c,d)=>{for(var f=0,h=0;h<c;h++){var k=C[b>>2],n=C[b+4>>2];b+=8;for(var m=0;m<n;m++){var l=a,p=z[k+m],A=Ha[l];0===p||10===p?((1===l?aa:t)(M(A)),A.length=0):A.push(p)}f+=n}C[d>>2]=f;return 0},l:a=>L.activeTexture(a),o:(a,b)=>{L.attachShader(N[a],O[b])},e:(a,b)=>{35051==a?L.Ta=b:35052==a&&(L.Na=b);L.bindBuffer(a,xa[b])},f:(a,b)=>{L.bindTexture(a,ya[b])},g:a=>{L.bindVertexArray(za[a])},
s:(a,b,c,d)=>L.blendFuncSeparate(a,b,c,d),d:(a,b,c,d)=>{c&&b?L.bufferData(a,z,d,c,b):L.bufferData(a,b,d)},F:(a,b,c,d)=>{c&&L.bufferSubData(a,b,z,d,c)},V:a=>L.clear(a),p:(a,b,c,d)=>L.clearColor(a,b,c,d),Q:a=>{L.compileShader(O[a])},N:()=>{var a=Q(N),b=L.createProgram();b.name=a;b.Fa=b.Da=b.Ea=0;b.Ga=1;N[a]=b;return a},S:a=>{var b=Q(O);O[b]=L.createShader(a);return b},m:a=>{if(a){var b=O[a];b?(L.deleteShader(b),O[a]=null):R||=1281}},n:(a,b)=>{L.detachShader(N[a],O[b])},E:(a,b,c,d,f)=>{L.drawElementsInstanced(a,
b,c,d,f)},C:a=>L.enable(a),c:a=>{L.enableVertexAttribArray(a)},i:(a,b)=>{S(a,b,"createBuffer",xa)},I:(a,b)=>{S(a,b,"createTexture",ya)},U:(a,b)=>{S(a,b,"createVertexArray",za)},J:(a,b,c,d)=>{a=L.getProgramInfoLog(N[a]);null===a&&(a="(unknown error)");b=0<b&&d?K(a,d,b):0;c&&(B[c>>2]=b)},L:(a,b,c)=>{if(c)if(a>=wa)R||=1281;else if(a=N[a],35716==b)a=L.getProgramInfoLog(a),null===a&&(a="(unknown error)"),B[c>>2]=a.length+1;else if(35719==b){if(!a.Fa){var d=L.getProgramParameter(a,35718);for(b=0;b<d;++b)a.Fa=
Math.max(a.Fa,L.getActiveUniform(a,b).name.length+1)}B[c>>2]=a.Fa}else if(35722==b){if(!a.Da)for(d=L.getProgramParameter(a,35721),b=0;b<d;++b)a.Da=Math.max(a.Da,L.getActiveAttrib(a,b).name.length+1);B[c>>2]=a.Da}else if(35381==b){if(!a.Ea)for(d=L.getProgramParameter(a,35382),b=0;b<d;++b)a.Ea=Math.max(a.Ea,L.getActiveUniformBlockName(a,b).length+1);B[c>>2]=a.Ea}else B[c>>2]=L.getProgramParameter(a,b);else R||=1281},O:(a,b,c,d)=>{a=L.getShaderInfoLog(O[a]);null===a&&(a="(unknown error)");b=0<b&&d?K(a,
d,b):0;c&&(B[c>>2]=b)},P:(a,b,c)=>{c?35716==b?(a=L.getShaderInfoLog(O[a]),null===a&&(a="(unknown error)"),B[c>>2]=a?a.length+1:0):35720==b?(a=L.getShaderSource(O[a]),B[c>>2]=a?a.length+1:0):B[c>>2]=L.getShaderParameter(O[a],b):R||=1281},j:(a,b)=>{b=b?M(z,b):"";if(a=N[a]){var c=a,d=c.Ca,f=c.Ma,h;if(!d){c.Ca=d={};c.La={};var k=L.getProgramParameter(c,35718);for(h=0;h<k;++h){var n=L.getActiveUniform(c,h);var m=n.name;n=n.size;var l=Ia(m);l=0<l?m.slice(0,l):m;var p=c.Ga;c.Ga+=n;f[l]=[n,p];for(m=0;m<n;++m)d[p]=
m,c.La[p++]=l}}c=a.Ca;d=0;f=b;h=Ia(b);0<h&&(d=parseInt(b.slice(h+1))>>>0,f=b.slice(0,h));if((f=a.Ma[f])&&d<f[0]&&(d+=f[1],c[d]=c[d]||L.getUniformLocation(a,b)))return d}else R||=1281;return-1},M:a=>{a=N[a];L.linkProgram(a);a.Ca=0;a.Ma={}},R:(a,b,c,d)=>{for(var f="",h=0;h<b;++h){var k=(k=C[c+4*h>>2])?M(z,k,d?C[d+4*h>>2]:void 0):"";f+=k}L.shaderSource(O[a],f)},q:(a,b,c,d,f,h,k,n,m)=>{if(L.Na)L.texImage2D(a,b,c,d,f,h,k,n,m);else if(m){var l=Ja(n);m>>>=31-Math.clz32(l.BYTES_PER_ELEMENT);L.texImage2D(a,
b,c,d,f,h,k,n,l,m)}else{if(m){l=Ja(n);var p=f*(d*({5:3,6:4,8:2,29502:3,29504:4,26917:2,26918:2,29846:3,29847:4}[k-6402]||1)*l.BYTES_PER_ELEMENT+4-1&-4);m=l.subarray(m>>>31-Math.clz32(l.BYTES_PER_ELEMENT),m+p>>>31-Math.clz32(l.BYTES_PER_ELEMENT))}else m=null;L.texImage2D(a,b,c,d,f,h,k,n,m)}},a:(a,b,c)=>L.texParameteri(a,b,c),K:(a,b)=>{L.uniform1i(W(a),b)},G:(a,b,c)=>{b&&L.uniform4fv(W(a),D,c>>2,4*b)},H:(a,b,c,d)=>{b&&L.uniformMatrix3fv(W(a),!!c,D,d>>2,9*b)},T:a=>{a=N[a];L.useProgram(a);L.Oa=a},h:(a,
b)=>{L.vertexAttribDivisor(a,b)},b:(a,b,c,d,f,h)=>{L.vertexAttribPointer(a,b,c,!!d,f,h)},W:(a,b,c,d)=>L.viewport(a,b,c,d),r:sa},Y=await (async function(){function a(c){Y=c.exports;x=Y.Y;ha();c=Y;e._wasm_alloc=c._;e._wasm_free=c.$;e._set_rng_seed=c.aa;e._set_constants_buffer=c.ba;e._init=c.ca;e._update_simulation=c.da;e._update=c.ea;e._update_rt=c.fa;e._update_navigation=c.ga;e._update_movement=c.ha;e._update_statistics=c.ia;e._update_collisions=c.ja;e._update_agent_navigation_by_id=c.ka;
e._update_agent_movement=c.la;e._update_agent_statistic_by_id=c.ma;e._add_agent=c.na;e._load_blob_data=c.oa;e._clear_blob_data=c.pa;e._get_blob_count=c.qa;e._get_active_agent_count=c.ra;e._set_rng_seed_js=c.sa;e._get_nav_tri_index_data_ptr=c.ta;e._sprite_renderer_init=c.ua;e._sprite_upload_atlas_rgba=c.va;e._sprite_upload_frame_table=c.wa;e._set_renderer_debug=c.xa;Na=c.ya;La=c.za;X=c.Aa;Ka=c.Ba;E--;e.monitorRunDependencies?.(E);0==E&&F&&(c=F,F=null,c());return Y}E++;e.monitorRunDependencies?.(E);
var b={a:Oa};if(e.instantiateWasm)return new Promise(c=>{e.instantiateWasm(b,(d,f)=>{c(a(d,f))})});G??=e.locateFile?e.locateFile("wasm_module.wasm",q):q+"wasm_module.wasm";return a((await la(b)).instance)}());
function Z(){function a(){e.calledRun=!0;if(!v){fa=!0;Y.Z();ba?.(e);e.onRuntimeInitialized?.();if(e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;){var b=e.postRun.shift();oa.push(b)}na(oa)}}if(0<E)F=Z;else{if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)qa();na(pa);0<E?F=Z:e.setStatus?(e.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>e.setStatus(""),1);a()},1)):a()}}
if(e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.shift()();Z();fa?moduleRtn=e:moduleRtn=new Promise((a,b)=>{ba=a;ca=b});
;return moduleRtn}})();if(typeof exports==="object"&&typeof module==="object"){module.exports=createWasmModule;module.exports.default=createWasmModule}else if(typeof define==="function"&&define["amd"])define([],()=>createWasmModule);
